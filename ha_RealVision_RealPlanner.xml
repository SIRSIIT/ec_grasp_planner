<HybridAutomaton current_control_mode="Mode1" name="Sequence">
  <ControlMode name="Mode0">
    <ControlSet type="rxControlSet">
      <Controller a_max="[0,0]" interpolation_type="cubic" name="GoToJointConfig" v_max="[7,1]0.200000;0.200000;0.200000;0.200000;0.200000;0.200000;0.200000" goal_is_relative="0" goal="[7,1]0.515739;0.722804;-0.0598616;2.0869;0.26149;0.877473;-0.114971" reinterpolation="0" priority="0" kp="[7,1]300.000000;200.000000;150.000000;20.000000;10.000000;10.000000;5.000000" kv="[7,1]2.000000;4.000000;2.000000;0.800000;0.200000;0.200000;0.150000" completion_times="[0,0]" type="InterpolatedJointController"/>
    </ControlSet>
  </ControlMode>
  <ControlSwitch source="Mode0" name="JointConfigurationSwitch" target="Mode4">
    <JumpCondition goal_is_relative="0" epsilon="0.12217304764" norm_weights="[7,1]1.000000;1.000000;1.000000;1.000000;1.000000;1.000000;1.000000" controller="GoToJointConfig" negate="0" jump_criterion="NORM_L_INF">
      <Sensor type="JointConfigurationSensor"/>
    </JumpCondition>
  </ControlSwitch>
  <ControlMode name="Mode1">
    <ControlSet type="TPNakamuraControlSet" js_kd="[7,1]1;2;1;0.4;0.1;0.1;0.01" js_kp="[7,1]30;20;15;20;10;10;10" name="nakamura_set">

      <Controller a_max="[0,0]" interpolation_type="cubic" name="GoToCartesianConfig" v_max="[2,1]0.250000;0.080000" goal_is_relative="0" goal="[4,8]0.864530,-0.499767,-0.053105,0.772024,0.864530,-0.499767,-0.053105,0.756093;-0.501027,-0.865335,-0.012943,0.350829,-0.501027,-0.865335,-0.012943,0.346946;-0.039485,0.037797,-0.998505,-0.044580,-0.039485,0.037797,-0.998505,-0.344131;0.000000,0.000000,0.000000,1.000000,0.000000,0.000000,0.000000,1.000000" reinterpolation="0" operational_frame="EE" priority="0" kp="[6,1]0.000000;0.000000;0.000000;0.000000;0.000000;0.000000" kv="[6,1]10.000000;10.000000;10.000000;10.000000;10.000000;10.000000" completion_times="[0,0]" type="InterpolatedHTransformController"/>

     <Controller type="InterpolatedJointController" name="posture_ctrl" goal="[7,1]0.0;0.53;0.0;1.25;0.0;0.0;0.0" goal_is_relative="0" kp="[7,1]0;0;0;0;0;0;0" kv="[7,1]2;4;2;1.2;0.2;0.3;0.02" completion_times="[0,0]"  reinterpolation="1" priority="1" interpolation_type="cubic" v_max="[7,1]0.200000;0.200000;0.200000;0.200000;0.200000;0.200000;0.200000"/>
    </ControlSet>

  </ControlMode>
  <ControlSwitch source="Mode1" name="ForceTorqueSwitch" target="Mode4">
    <JumpCondition goal_is_relative="1" goal="[6,1]-2.500000;0.000000;0.000000;0.000000;0.000000;0.000000" epsilon="0.0" norm_weights="[6,1]1.000000;0.000000;0.000000;0.000000;0.000000;0.000000" negate="0" jump_criterion="THRESH_LOWER_BOUND">
      <Sensor frame_id="odom" type="ForceTorqueSensor"/>
    </JumpCondition>
  </ControlSwitch>
  <ControlMode name="Mode2">
    <ControlSet js_kd="[7,1]2.000000;4.000000;2.000000;0.800000;0.200000;0.200000;0.020000" js_kp="[7,1]300.000000;200.000000;150.000000;20.000000;10.000000;10.000000;10.000000" type="NakamuraControlSet" name="nakamura_set">
      <Controller a_max="[0,0]" desired_force_dimension="[6,1]0.000000;0.000000;1.000000;0.000000;0.000000;0.000000" interpolation_type="linear" desired_displacement="[4,4]1.000000,0.000000,0.000000,0.000000;0.000000,1.000000,0.000000,0.000000;0.000000,0.000000,1.000000,0.000000;0.000000,0.000000,0.000000,1.000000" desired_min_force="-0.5" name="slide" desired_distance="0.0" v_max="[0,0]" goal_is_relative="1" goal="[4,4]1.000000,0.000000,0.000000,0.000000;0.000000,1.000000,0.000000,0.000000;0.000000,0.000000,1.000000,0.000000;0.000000,0.000000,0.000000,1.000000" force_gradient="[4,4]1.000000,0.000000,0.000000,0.000000;0.000000,1.000000,0.000000,0.000000;0.000000,0.000000,1.000000,0.005000;0.000000,0.000000,0.000000,1.000000" reinterpolation="0" operational_frame="EE" priority="0" kp="[7,1]0.000000;0.000000;0.000000;0.000000;0.000000;0.000000;0.000000" kv="[6,1]10.000000;10.000000;10.000000;10.000000;10.000000;10.000000" completion_times="[0,0]" type="ForceHTransformController" desired_max_force="0.5"/>
      <Controller a_max="[2,1]0.000000;0.000000" grasp_type="1" grasp_strength="10.0" name="move_fingers" v_max="[2,1]0.000000;0.000000" goal_is_relative="0" goal="[2,1]0.000000;0.000000" reinterpolation="0" priority="0" kp="[2,1]0.000000;0.000000" kv="[2,1]0.000000;0.000000" completion_times="[0,0]" type="FeixGraspSoftHandController"/>
    </ControlSet>
  </ControlMode>
  <ControlSwitch source="Mode2" name="TimeSwitch" target="Mode3">
    <JumpCondition goal_is_relative="1" goal="[1,1]10.000000" epsilon="0" norm_weights="[0,0]" negate="0" jump_criterion="THRESH_UPPER_BOUND">
      <Sensor type="ClockSensor"/>
    </JumpCondition>
  </ControlSwitch>
  <ControlMode name="Mode3">
    <ControlSet js_kd="[7,1]2.000000;4.000000;2.000000;0.800000;0.200000;0.200000;0.020000" js_kp="[7,1]300.000000;200.000000;150.000000;20.000000;10.000000;10.000000;10.000000" type="NakamuraControlSet" name="nakamura_set">
      <Controller a_max="[0,0]" interpolation_type="cubic" name="GoToCartesianConfig" v_max="[2,1]0.250000;0.080000" goal_is_relative="0" goal="[4,4]0.864530,-0.499767,-0.053105,0.772024;-0.501027,-0.865335,-0.012943,0.350829;-0.039485,0.037797,-0.998505,-0.044580;0.000000,0.000000,0.000000,1.000000" reinterpolation="0" operational_frame="EE" priority="1" kp="[6,1]0.000000;0.000000;0.000000;0.000000;0.000000;0.000000" kv="[6,1]10.000000;10.000000;10.000000;10.000000;10.000000;10.000000" completion_times="[0,0]" type="InterpolatedHTransformController"/>
    </ControlSet>
  </ControlMode>
  <ControlSwitch source="Mode3" name="FramePoseSwitch" target="Mode4">
    <JumpCondition goal_is_relative="0" epsilon="0.001" norm_weights="[2,1]0.100000;1.000000" controller="GoToCartesianConfig" negate="0" jump_criterion="NORM_TRANSFORM">
      <Sensor frame_id="EE" type="FramePoseSensor"/>
    </JumpCondition>
  </ControlSwitch>
  <ControlMode name="Mode4">
    <ControlSet type="rxControlSet"/>
  </ControlMode>
</HybridAutomaton>
